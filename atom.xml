<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>本无来往与西东</title>
  
  <subtitle>既然选择了远方 便只顾风雨兼程</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-07-17T14:59:10.652Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>金毛玲</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>学习笔记:Mybatis-PageHelper</title>
    <link href="http://yoursite.com/2019/07/17/Mybatis%E4%B9%8BPagehelper/"/>
    <id>http://yoursite.com/2019/07/17/Mybatis之Pagehelper/</id>
    <published>2019-07-17T12:04:14.000Z</published>
    <updated>2019-07-17T14:59:10.652Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h3 id="Mybatis为我们提供了非常优秀的分页插件PageHelper该插件支持任何复杂的单表或者是多表-PageHelper实现了通用的分页查询-支持的数据有mysql-Oracle-DB2-PostgreSQL等"><a href="#Mybatis为我们提供了非常优秀的分页插件PageHelper该插件支持任何复杂的单表或者是多表-PageHelper实现了通用的分页查询-支持的数据有mysql-Oracle-DB2-PostgreSQL等" class="headerlink" title="Mybatis为我们提供了非常优秀的分页插件PageHelper该插件支持任何复杂的单表或者是多表. PageHelper实现了通用的分页查询,支持的数据有mysql,Oracle,DB2,PostgreSQL等"></a>Mybatis为我们提供了非常优秀的分页插件PageHelper该插件支持任何复杂的单表或者是多表. PageHelper实现了通用的分页查询,支持的数据有mysql,Oracle,DB2,PostgreSQL等</h3><h3 id="该插件托管于github-https-github-com-pagehelper-Mybatis-PageHelper"><a href="#该插件托管于github-https-github-com-pagehelper-Mybatis-PageHelper" class="headerlink" title="该插件托管于github: https://github.com/pagehelper/Mybatis-PageHelper"></a>该插件托管于github: <a href="https://github.com/pagehelper/Mybatis-PageHelper" target="_blank" rel="noopener">https://github.com/pagehelper/Mybatis-PageHelper</a></h3><h1 id="如何使用PageHelper"><a href="#如何使用PageHelper" class="headerlink" title="如何使用PageHelper"></a>如何使用PageHelper</h1><h3 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h3><h4 id="使用maven导入"><a href="#使用maven导入" class="headerlink" title="- 使用maven导入"></a>- 使用maven导入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.4.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.jsqlparser&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jsqlparser&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.9.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="导入jar包"><a href="#导入jar包" class="headerlink" title="导入jar包"></a>导入jar包</h4><pre><code>1). 你可以从下面的地址中下载最新版本的 jar 包https://oss.sonatype.org/content/repositories/releases/com/github/pagehelper/pagehelper/http://repo1.maven.org/maven2/com/github/pagehelper/pagehelper/2). 由于使用了sql 解析工具，你还需要下载 jsqlparser.jar：http://repo1.maven.org/maven2/com/github/jsqlparser/jsqlparser/0.9.5/</code></pre><h3 id="配置拦截器插件"><a href="#配置拦截器插件" class="headerlink" title="配置拦截器插件"></a>配置拦截器插件</h3><p>特别注意，新版拦截器是 <strong>com.github.pagehelper.PageInterceptor</strong></p><p><strong>com.github.pagehelper.PageHelper</strong> 现在是一个特殊的 dialect 实现类，是分页插件的默认实现类，提供了和以前相同的用法。</p><h4 id="在Mybatis配置xml中配置拦截器插件"><a href="#在Mybatis配置xml中配置拦截器插件" class="headerlink" title="在Mybatis配置xml中配置拦截器插件"></a>在Mybatis配置xml中配置拦截器插件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugins&gt;</span><br><span class="line">        &lt;plugin interceptor=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;</span><br><span class="line">            &lt;!--分页参数合理化  --&gt;</span><br><span class="line">            &lt;property name=&quot;reasonable&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br></pre></td></tr></table></figure><h4 id="在Spring配置文件中配置拦截器插件"><a href="#在Spring配置文件中配置拦截器插件" class="headerlink" title="在Spring配置文件中配置拦截器插件"></a>在Spring配置文件中配置拦截器插件</h4><p>使用 spring 的属性配置方式，可以使用 <strong>plugins</strong> 属性像下面这样配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class="line">  &lt;!-- 注意其他配置 --&gt;</span><br><span class="line">  &lt;property name=&quot;plugins&quot;&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">      &lt;bean class=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;properties&quot;&gt;</span><br><span class="line">          &lt;!--使用下面的方式配置参数，一行配置一个 --&gt;</span><br><span class="line">          &lt;value&gt;</span><br><span class="line">            params=value1</span><br><span class="line">          &lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure><p>确确实实去配置文件会让人显得很郁闷也很头疼.</p><p>所以我一般参照官方文档去配置,里面不仅有分页插件的参数介绍还有常用的配置参数,不同的场景需要配置不同的参数.</p><p><a href="https://pagehelper.github.io/docs/howtouse/" target="_blank" rel="noopener">参考PageHelper官方文档</a></p><h3 id="DAO层"><a href="#DAO层" class="headerlink" title="DAO层"></a>DAO层</h3><p>在我做的demo中,我是获取所有部门然后在使用分页插件进行物理分页.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface DepartmentMapper &#123;</span><br><span class="line"> //获取所有部门</span><br><span class="line">    List&lt;Department&gt; getAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface DepartmentService &#123;</span><br><span class="line">//查询所有</span><br><span class="line">    List&lt;Department&gt; getAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现相应的接口</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class DepartmentServiceImpl implements DepartmentService &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    DepartmentMapper departmentMapper;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;Department&gt; getAll() &#123;</span><br><span class="line">        return departmentMapper.getAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h3><p>在控制器中,是跳转到部门的页面的时候将数据查询到然后使用PageHelper</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @project : HRM</span><br><span class="line"> * @description : 控制器-首页管理</span><br><span class="line"> * @author : zy</span><br><span class="line"> */</span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;main&quot;)</span><br><span class="line">public class MainController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    UserService userService;</span><br><span class="line">    @Autowired</span><br><span class="line">    DepartmentService departmentService;</span><br><span class="line">    @Autowired</span><br><span class="line">    EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">     /**</span><br><span class="line">     * @decription 查询所有部门信息并跳转到部门信息页面(分页查询)</span><br><span class="line">     * @param model</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(&quot;toDepartmentList.html&quot;)</span><br><span class="line">    public String toDepartmentList(@RequestParam(value = &quot;pn&quot;, defaultValue = &quot;1&quot;) Integer pn, Model model)&#123;</span><br><span class="line">        //pn为当前页码,每页的大小为5</span><br><span class="line">        PageHelper.startPage(pn,5);</span><br><span class="line">        List&lt;Department&gt; departmentList = departmentService.getAll();</span><br><span class="line">        //导航栏最多为5页</span><br><span class="line">        PageInfo pageInfo = new PageInfo(departmentList,5);</span><br><span class="line">        model.addAttribute(&quot;pageInfo&quot;,pageInfo);</span><br><span class="line">        return &quot;Dep/DepartmentList&quot;;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用PageHelper的静态方法-PageHelper-startPage-currentPage-PageSize"><a href="#使用PageHelper的静态方法-PageHelper-startPage-currentPage-PageSize" class="headerlink" title="使用PageHelper的静态方法:PageHelper.startPage(currentPage,PageSize)"></a>使用PageHelper的静态方法:PageHelper.startPage(currentPage,PageSize)</h4><p>(<strong>currentPage</strong>是指的当前页数<br><strong>PageSize</strong>是指的是每页的大小)</p><h4 id="使用PageInfo对象"><a href="#使用PageInfo对象" class="headerlink" title="使用PageInfo对象"></a>使用PageInfo对象</h4><p>在使用PageHelper.start后,我们可以使用PageInfo进行封装,可以从PageInfo中获得更多的信息,比如:当前页码,最后页码等等(详情<strong>5.3</strong>)</p><p>这里使用进行了分页封装,departmentList实际上是一个代理对象.<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageInfo pageInfo = new PageInfo(departmentList,5);</span><br></pre></td></tr></table></figure></p><h4 id="PageInfo的属性参数-成员变量"><a href="#PageInfo的属性参数-成员变量" class="headerlink" title="PageInfo的属性参数,成员变量"></a>PageInfo的属性参数,成员变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">//当前页</span><br><span class="line">private int pageNum;</span><br><span class="line"> </span><br><span class="line">//每页的数量</span><br><span class="line">private int pageSize;</span><br><span class="line"> </span><br><span class="line">//当前页的数量</span><br><span class="line">private int size;</span><br><span class="line"></span><br><span class="line">//总记录数</span><br><span class="line">private long total;</span><br><span class="line"> </span><br><span class="line">//总页数</span><br><span class="line">private int pages;</span><br><span class="line"> </span><br><span class="line">//结果集(每页显示的数据)</span><br><span class="line">private List&lt;T&gt; list;</span><br><span class="line"> </span><br><span class="line">//第一页</span><br><span class="line">private int firstPage;</span><br><span class="line"> </span><br><span class="line">//前一页</span><br><span class="line">private int prePage;</span><br><span class="line"> </span><br><span class="line">//是否为第一页</span><br><span class="line">private boolean isFirstPage = false;</span><br><span class="line"> </span><br><span class="line">//是否为最后一页</span><br><span class="line">private boolean isLastPage = false;</span><br><span class="line"> </span><br><span class="line">//是否有前一页</span><br><span class="line">private boolean hasPreviousPage = false;</span><br><span class="line"> </span><br><span class="line">//是否有下一页</span><br><span class="line">private boolean hasNextPage = false;</span><br><span class="line"> </span><br><span class="line">//导航页码数</span><br><span class="line">private int navigatePages;</span><br><span class="line"> </span><br><span class="line">//所有导航页号</span><br><span class="line">private int[] navigatepageNums;</span><br></pre></td></tr></table></figure><h3 id="View层-JSP"><a href="#View层-JSP" class="headerlink" title="View层(JSP)"></a>View层(JSP)</h3><p>这里使用了<figure class="highlight plain"><figcaption><span>test</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">&lt;div class=&quot;&quot; style=&quot;position: fixed;left: 500px;top: 490px;&quot;&gt;</span><br><span class="line">              当前 $&#123;pageInfo.pageNum&#125; 页,总 $&#123;pageInfo.pages&#125; 页,总 $&#123;pageInfo.total&#125; 条记录</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;&quot; style=&quot;position: fixed;right: 500px;top: 460px;&quot;&gt;</span><br><span class="line">              &lt;nav aria-label=&quot;Page navigation&quot;&gt;</span><br><span class="line">                  &lt;ul class=&quot;pagination&quot;&gt;</span><br><span class="line">                      &lt;li&gt;&lt;a href=&quot;/main/toDepartmentList.html?pn=1&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                      &lt;c:if test=&quot;$&#123;pageInfo.hasPreviousPage&#125;&quot;&gt;</span><br><span class="line">                      &lt;li&gt;</span><br><span class="line">                          &lt;a href=&quot;/main/toDepartmentList.html?pn=$&#123;pageInfo.pageNum-1&#125;&quot; aria-label=&quot;Previous&quot;&gt;</span><br><span class="line">                              &lt;span aria-hidden=&quot;true&quot;&gt;&amp;laquo;&lt;/span&gt;</span><br><span class="line">                          &lt;/a&gt;</span><br><span class="line">                      &lt;/li&gt;</span><br><span class="line">                      &lt;/c:if&gt;</span><br><span class="line">                      &lt;c:forEach items=&quot;$&#123;pageInfo.navigatepageNums&#125;&quot; var=&quot;pagenum&quot;&gt;</span><br><span class="line">                            &lt;c:if test=&quot;$&#123;pagenum == pageInfo.pageNum&#125;&quot;&gt;</span><br><span class="line">                                &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;/main/toDepartmentList.html?pn=$&#123;pagenum&#125;&quot;&gt;$&#123;pagenum&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                            &lt;/c:if&gt;</span><br><span class="line">                            &lt;c:if test=&quot;$&#123;pagenum != pageInfo.pageNum&#125;&quot;&gt;</span><br><span class="line">                                &lt;li&gt;&lt;a href=&quot;/main/toDepartmentList.html?pn=$&#123;pagenum&#125;&quot;&gt;$&#123;pagenum&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                            &lt;/c:if&gt;</span><br><span class="line">                      &lt;/c:forEach&gt;</span><br><span class="line">                      &lt;c:if test=&quot;$&#123;pageInfo.hasNextPage&#125;&quot;&gt;</span><br><span class="line">                          &lt;li&gt;</span><br><span class="line">                              &lt;a href=&quot;/main/toDepartmentList.html?pn=$&#123;pageInfo.pageNum+1&#125;&quot; aria-label=&quot;Next&quot;&gt;</span><br><span class="line">                                  &lt;span aria-hidden=&quot;true&quot;&gt;&amp;raquo;&lt;/span&gt;</span><br><span class="line">                              &lt;/a&gt;</span><br><span class="line">                          &lt;/li&gt;</span><br><span class="line">                          &lt;li&gt;&lt;a href=&quot;/main/toDepartmentList.html?pn=$&#123;pageInfo.pages&#125;&quot;&gt;末页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                      &lt;/c:if&gt;</span><br><span class="line">                  &lt;/ul&gt;</span><br><span class="line">              &lt;/nav&gt;</span><br><span class="line">          &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h1 id="demo截图"><a href="#demo截图" class="headerlink" title="demo截图"></a>demo截图</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/17/ZOuKRP.jpg" alt="ZOuKRP.jpg" title>                </div>                <div class="image-caption">ZOuKRP.jpg</div>            </figure><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>第一次写笔记,感觉自己还是做的很不够,思路不够清晰,写的不太好也写的太慢…</p><p>希望自己能够在以后写的越来越好.</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/17/ZOM3Nj.jpg" alt="ZOM3Nj.jpg" title>                </div>                <div class="image-caption">ZOM3Nj.jpg</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;h3 id=&quot;Mybatis为我们提供了非常优秀的分页插件PageHelper该插件支持任何复杂的单表或者是多表-PageHelper实现了通用
      
    
    </summary>
    
      <category term="study" scheme="http://yoursite.com/categories/study/"/>
    
      <category term="java" scheme="http://yoursite.com/categories/study/java/"/>
    
    
      <category term="Mybatis" scheme="http://yoursite.com/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客备份</title>
    <link href="http://yoursite.com/2019/07/17/Hexo%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD/"/>
    <id>http://yoursite.com/2019/07/17/Hexo博客备份/</id>
    <published>2019-07-17T03:49:15.000Z</published>
    <updated>2019-07-17T03:53:13.340Z</updated>
    
    <content type="html"><![CDATA[<h2 id="关于hexo博客备份"><a href="#关于hexo博客备份" class="headerlink" title="关于hexo博客备份"></a>关于hexo博客备份</h2><p>使用 Hexo 在 GitHub Pages 搭建博客时，博客作为一个单独的 GitHub 仓库存在，但是这个仓库只有生成的静态网页文件，并没有 Hexo 的源文件。这样一来换电脑或者重装系统后，再想找回源文件就比较麻烦了，这里推荐一种比较完美的方法解决备份问题。</p><h1 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h1><ol><li>创建仓库 WincerChan.github.io，如果同名仓库之前已经创建，请将之前的仓库改名新建的仓库必须是 Username.github.io（如果你是将 Hexo 博客部署到了自己的服务器，那么仓库名可以随意设置，我这里就是随意设置的仓库）</li><li>创建两个分支：master 和 hexo；</li><li>设置 hexo 为默认分支</li><li>将刚刚创建的新仓库 clone 至本地，将之前的 hexo 文件夹中的 _config.yml、themes/、source/、scaffolds/、package.json 和 .gitignore 复制至 WincerChan.github.io 文件夹</li><li>将 themes/next/（我用的是 NexT 主题）中的 .git/ 删除，否则无法将主题文件夹 push（也可以将主题文件夹使用子模块的方式添加到该仓库)</li><li>在 WincerChan.github.io 文件夹执行 npm install 和 npm install hexo-deployer-git（这里可以看一看分支是不是显示为 hexo）</li><li>执行 git add、git commit -m “”、git push origin hexo 来提交 hexo 网站源文件；</li><li>执行 hexo g -d 生成静态网页部署至 Github 上</li></ol><h1 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h1><ol><li>依次执行 git add、git commit -m “” 和 git push origin hexo 来提交 hexo 网站源文件</li><li>执行 hexo g -d 生成静态网页部署至 Github 上</li></ol><h1 id="恢复"><a href="#恢复" class="headerlink" title="恢复"></a>恢复</h1><ol><li>安装 git</li><li>安装Nodejs和npm</li><li>使用 git clone git#github.com:WincerChan/WincerChan.github.io.git 将仓库拷贝至本地</li><li>在文件夹内执行以下命令 npm install hexo-cli -g、npm install、npm install hexo-deployer-git</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;关于hexo博客备份&quot;&gt;&lt;a href=&quot;#关于hexo博客备份&quot; class=&quot;headerlink&quot; title=&quot;关于hexo博客备份&quot;&gt;&lt;/a&gt;关于hexo博客备份&lt;/h2&gt;&lt;p&gt;使用 Hexo 在 GitHub Pages 搭建博客时，博客作为一个单独的
      
    
    </summary>
    
      <category term="study" scheme="http://yoursite.com/categories/study/"/>
    
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>git basic command</title>
    <link href="http://yoursite.com/2019/07/17/git-basic-command/"/>
    <id>http://yoursite.com/2019/07/17/git-basic-command/</id>
    <published>2019-07-17T02:59:21.000Z</published>
    <updated>2019-07-17T14:51:57.964Z</updated>
    
    <content type="html"><![CDATA[<p>###Git 基本命令</p><hr><h4 id="git-init-命令把这个目录变成Git可以管理的仓库"><a href="#git-init-命令把这个目录变成Git可以管理的仓库" class="headerlink" title="git init (命令把这个目录变成Git可以管理的仓库)"></a><strong>git init</strong> (命令把这个目录变成Git可以管理的仓库)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure><h4 id="git-add-将文件添加到仓库"><a href="#git-add-将文件添加到仓库" class="headerlink" title="git add (将文件添加到仓库)"></a><strong>git add</strong> (将文件添加到仓库)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add readme.txt</span><br></pre></td></tr></table></figure><h4 id="git-commit-将文件提交到仓库"><a href="#git-commit-将文件提交到仓库" class="headerlink" title="git commit (将文件提交到仓库)"></a><strong>git commit</strong> (将文件提交到仓库)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;wrote a readme file&quot;</span><br><span class="line">[master (root-commit) eaadf4e] wrote a readme file</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></table></figure><p>(这里git commit -m “这里是添加本次提交的说明”<br>git add 是可以添加多个文件,而git commit是可以一次提交多个的)</p><h4 id="git-status-查看当前仓库的状态"><a href="#git-status-查看当前仓库的状态" class="headerlink" title="git status (查看当前仓库的状态)"></a><strong>git status</strong> (查看当前仓库的状态)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p>(这里表示readme.txt是已经修改了,但是还没有提交修改)</p><h4 id="git-diff-查看不同-difference"><a href="#git-diff-查看不同-difference" class="headerlink" title="git diff (查看不同(difference))"></a><strong>git diff</strong> (查看不同(difference))</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff readme.txt </span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 46d49bf..9247db6 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line">-Git is a version control system.</span><br><span class="line">+Git is a distributed version control system.</span><br><span class="line"> Git is free software.</span><br></pre></td></tr></table></figure><h4 id="git-log-命令显示从最近到最远的提交日志"><a href="#git-log-命令显示从最近到最远的提交日志" class="headerlink" title="git log (命令显示从最近到最远的提交日志)"></a><strong>git log</strong> (命令显示从最近到最远的提交日志)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit 1094adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -&gt; master)</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 21:06:15 2018 +0800</span><br><span class="line"></span><br><span class="line">    append GPL</span><br><span class="line"></span><br><span class="line">commit e475afc93c209a690c39c13a46716e8fa000c366</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 21:03:36 2018 +0800</span><br><span class="line"></span><br><span class="line">    add distributed</span><br><span class="line"></span><br><span class="line">commit eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Fri May 18 20:59:18 2018 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure><p>(如果嫌输出信息太多，看得眼花缭乱的，可以试试加上–pretty=oneline参数：)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline</span><br><span class="line">1094adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -&gt; master) append GPL</span><br><span class="line">e475afc93c209a690c39c13a46716e8fa000c366 add distributed</span><br><span class="line">eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0 wrote a readme file</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;###Git 基本命令&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&quot;git-init-命令把这个目录变成Git可以管理的仓库&quot;&gt;&lt;a href=&quot;#git-init-命令把这个目录变成Git可以管理的仓库&quot; class=&quot;headerlink&quot; title=&quot;git init (命令
      
    
    </summary>
    
      <category term="study" scheme="http://yoursite.com/categories/study/"/>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/06/25/hello-world/"/>
    <id>http://yoursite.com/2019/06/25/hello-world/</id>
    <published>2019-06-25T03:36:04.338Z</published>
    <updated>2019-07-17T02:55:04.711Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
